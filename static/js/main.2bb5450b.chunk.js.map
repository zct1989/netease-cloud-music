{"version":3,"sources":["core/decorators/request.decorators.ts","core/model/model.ts","core/http/request-params.ts","core/http/index.ts","core/http/request-service.ts","assets/images/play-bg.jpg","store/router.store.tsx","layout/components/default/header.component.tsx","layout/components/default/side-menu.component.tsx","layout/components/default/footer.component.tsx","shared/components/style.component.ts","config/services/banner.controller.ts","services/banner.service.ts","config/services/personalized.controller.ts","services/personalized.service.ts","assets/icons/calendar.svg","assets/icons/play.svg","pages/discover/recommend.tsx","store/test2.tsx","pages/index.tsx","Router.tsx","layout/default.layout.tsx","store/menu.store.tsx","store/index.tsx","App.tsx","serviceWorker.ts","config/app.config.ts","bootstrap/index.ts","bootstrap/http.boot.ts","index.tsx","core/http/enums.ts","core/http/request-interceptor.ts","core/http/request-object.ts","core/http/request-option.ts","core/http/extend-service.ts"],"names":["Request","server","model","force","target","name","descriptor","generateRequestObject","object","RequestObject","setResponseModel","requestObject","_value","value","requestParams","setRequestObject","call","Model","RequestParams","data","options","this","classToPlain","extendServices","Object","values","filter","service","ExtendService","RequestService","callback","request","axiosInstance","instance","axios","create","baseURL","config","timeout","headers","Accept","push","requestOption","getOptions","then","response","interceptors","status","defined","interceptor","success","error","catch","ex","requestCatchHandle","Promise","reject","before","after","RequestInterceptor","getRequestUrl","getRequestHeader","module","exports","RouterStore","window","location","hash","search","pathname","useState","_updateLocation","history","_updateHistory","updateLocation","updateHistory","components","HistoryWrap","styled","div","MenuWrap","ToolBarWrap","HeaderMenuItem","SearchWrap","Header","props","state","currentMenu","className","getHistoryContainer","getMenuContainer","getSearchContainer","getToolbarContainer","type","of","routerStore","getMenuChildren","map","item","key","title","onClick","onSelectMenuItem","prefix","allowClear","menuList","find","x","path","level","parent","id","menu","defaultItem","children","includes","setTimeout","setState","Component","ComponentWrap","section","ReactSVG","SideMenu","list","group","findCurrentMenu","userContainer","menuContainer","gutter","justify","align","size","icon","onMenuClick","style","width","background","defaultSelectedKeys","getDefaultSelectKeys","mode","getItemList","getMenuItem","getGroupList","getMenuGroup","toString","reduce","result","Math","random","ItemGroup","Item","span","src","beforeInjection","svg","setAttribute","Footer","FlexColumn","FlexRow","BannerController","banner","controller","RequestMethod","Get","BannerService","PersonalizedController","personalized","newsong","action","djprogram","privatecontent","PersonalizedService","_extends","assign","i","arguments","length","source","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","_ref3","d","fill","_ref","svgRef","t","viewBox","height","ref","ForwardRef","forwardRef","Wrap","RecommendItem","Date","getDate","PrivateItem","Recommend","bannerService","personalizedService","banners","recommends","privates","getBannerContainer","getRecommendContainer","getPrivateContainer","getBannerList","getRecommendList","getPrivateContentList","count","floor","getBanner","subscribe","getPersonalized","limit","getPrivateContent","console","log","autoplay","margin","alt","targetId","imageUrl","require","component","CanlendarSvg","picUrl","PlaySvg","convertPlayCount","playCount","sPicUrl","Test2Store","setCount","useEffect","increase","Index","store","getStore","RouterContainer","useLocation","useHistory","useStore","React","exact","to","Router","HeaderWrap","SideMenuWrap","FooterWrap","ContentWrap","Content","main","DefaultLayout","layoutHeader","flex","position","layoutSideMenu","lauyoutContent","lauyoutFooter","MenuStore","updateMenu","update","providers","ProvidersComposer","reduceRight","Parent","Provider","App","Boolean","hostname","match","process","debug","REACT_APP_TIMEOUT","setConfig","appConfig","use","respone","bootstrap","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","RequestState","requestServer","requestObservable","requestObserver","responseModel","requestState","Ready","UUID","generate","Observable","observer","Loading","RequestOption","getInstance","send","plainToClass","getExtendService","next","complete","finally","EMPTY","url","header","method","getParamsByMethod","params","paramsSerializer","Qs","stringify","arrayFormat","skipNulls","allowDots","Error","append","join","isGet","isGetMethod","filterEmptyData","Delete","entries","undefined","Array","every","forEach"],"mappings":"sJAAA,8CAOO,SAASA,EAAT,GAQH,IAPFC,EAOC,EAPDA,OACAC,EAMC,EANDA,MACAC,EAKC,EALDA,MAMA,OAAO,SAACC,EAAQC,EAAMC,GACpB,IAAMC,EAAwB,WAE5B,IAAMC,EAAS,IAAIC,IAAcR,GAOjC,OAJIC,GACFM,EAAOE,iBAAiBR,GAGnBM,GAGHG,EAAgBJ,IAGhBK,EAASN,EAAWO,MAe1B,OAZAP,EAAWO,MAAQ,SAACC,GASlB,OARIX,EACFW,EAAcC,iBAAiBR,KAG/BO,EAAcC,iBAAiBJ,GAI1BC,EAAOI,KAAKZ,EAAQU,IAGtBR,K,2DC/CWW,EAAtB,kC,0DCUO,IAAMC,EAAb,WASE,WAAYC,EAAOC,GAAiC,yBAR7CD,UAQ4C,OAP5CC,aAO4C,OAN3CT,mBAM2C,EACjDU,KAAKF,KAAOA,aAAgBF,EAAQK,uBAAaH,GAAQA,GAAQ,GACjEE,KAAKD,QAAUA,GAAW,GAX9B,6DAkB0BT,GACtBU,KAAKV,cAAgBA,IAnBzB,yCA0BI,IAAMY,EAAiBF,KAAKD,QACxBI,OAAOC,OAAOJ,KAAKD,SAASM,QAC1B,SAAAC,GAAO,OAAIA,aAAmBC,OAEhC,GACJ,MAAM,GAAN,mBAAWL,GAAX,YAA8BM,IAAeN,mBA/BjD,0BAsCaO,GACTT,KAAKF,KAAOW,EAAST,KAAKF,QAvC9B,gCA8CI,OAAOE,KAAKV,cAAcoB,QAAQV,UA9CtC,M,gCCVA,ggB,gLCIaQ,EAAb,WAsEE,aAAe,yBALPG,mBAKM,EACZH,EAAeI,SAAWZ,KAG1BA,KAAKW,cAAgBE,IAAMC,OAAO,CAChCC,QAASP,EAAeQ,OAAOpC,OAC/BqC,QAAST,EAAeQ,OAAOC,QAC/BC,QAAS,CACP,eAAgB,mBAChBC,OAAQ,sBA/EhB,8DAwCgD,IAApBvC,EAAmB,EAAnBA,OAAQqC,EAAW,EAAXA,QAChCT,EAAeQ,OAAOpC,OAASA,EAC/B4B,EAAeQ,OAAOC,QAAUA,IA1CpC,2CAiDqCX,GACjCE,EAAeN,eAAekB,KAAKd,KAlDvC,oCAyDI,OAAIN,KAAKY,SACAZ,KAAKY,SAGP,IAAIJ,MA7Df,0CAwFca,GAEV,IAAMtB,EAAUsB,EAAcC,aAG9B,OAAOtB,KAAKW,cACTD,QADI,eAGAX,IAEJwB,MAAK,SAACC,GAGL,OAAKhB,EAAeiB,aAAaC,OAAOC,QAOpCnB,EAAeiB,aAAaC,OAAOE,YAAYJ,GAE1ChB,EAAeiB,aAAaI,QAAQF,QACvCnB,EAAeiB,aAAaI,QAAQD,YAAYJ,GAChDA,EAGGhB,EAAeiB,aAAaK,MAAMH,QACrCnB,EAAeiB,aAAaK,MAAMF,YAAYJ,GAC9CA,EAfGhB,EAAeiB,aAAaI,QAAQF,QACvCnB,EAAeiB,aAAaI,QAAQD,YAAYJ,GAChDA,KAgBPO,OAAM,SAAAC,GAIL,OAHIxB,EAAeyB,oBACjBzB,EAAeyB,mBAAmBD,EAAGR,UAEhCU,QAAQC,OAAOH,UA5H9B,KAAaxB,EAEGQ,OAAS,CACrBpC,OAAQ,GACRqC,QAAS,KAJAT,EAQII,c,EARJJ,EAWGiB,aAAe,CAE3BW,OAAQ,GAERC,MAAO,GAEPX,OAAQ,IAAIY,IAEZT,QAAS,IAAIS,IAEbR,MAAO,IAAIQ,KArBF9B,EAyBG+B,mB,EAzBH/B,EA4BGgC,sB,EA5BHhC,EA+BGyB,wB,EA/BHzB,EAkCGN,eAAkC,I,kBCtClDuC,EAAOC,QAAU,m/K,yMCIV,SAASC,IAAe,IAAD,EACOC,OAAOC,SAAlCC,EADoB,EACpBA,KAAMC,EADc,EACdA,OAAQC,EADM,EACNA,SADM,EAGQC,mBAAS,CAC3CH,OACAC,SACAC,aAN0B,mBAGrBH,EAHqB,KAGXK,EAHW,OASMD,qBATN,mBASrBE,EATqB,KASZC,EATY,KAmB5B,MAAO,CACLP,WACAM,UACAE,eAXF,SAAwB7D,GACtB0D,EAAgB1D,IAWhB8D,cARF,SAAuB9D,GACrB4D,EAAe5D,KAWZ,I,qlCCxBP,IAAM+D,EAAa,CACjBC,YAAaC,IAAOC,IAAT,KAUXC,SAAUF,IAAOC,IAAT,KAKRE,YAAaH,IAAOC,IAAT,KASXG,eAAgBJ,IAAOC,IAAT,KAYdI,WAAYL,IAAOC,IAAT,MAiBSK,E,YACnB,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KACDC,MAAQ,CAAEC,YAAa,MAFX,E,sEAMjB,OACE,6BAASC,UAAU,6CAChBnE,KAAKoE,sBACLpE,KAAKqE,mBACLrE,KAAKsE,qBACLtE,KAAKuE,yB,4CAMV,OACE,kBAAChB,EAAWC,YAAZ,CAAwBW,UAAU,eAChC,uBAAMK,KAAK,SACX,uBAAMA,KAAK,a,yCAKU,IAAD,OACxB,OACE,kBAACjB,EAAWI,SAAZ,KACE,kBAAC,WAAD,CAAUc,GAAI9B,IACX,SAAA+B,GAAW,OACV,EAAKC,gBAAgBD,EAAY7B,UAAU+B,KAAI,SAAAC,GAAI,OACjD,kBAACtB,EAAWM,eAAZ,CACEiB,IAAKD,EAAKE,MACVZ,UACE,EAAKF,MAAMC,aACX,EAAKD,MAAMC,YAAYa,QAAUF,EAAKE,MAClC,UACA,GAENC,QAAS,kBAAM,EAAKC,iBAAiBJ,KAEpCA,EAAKE,gB,2CAUlB,OACE,kBAACxB,EAAWO,WAAZ,KACE,uBAAOoB,OAAQ,uBAAMV,KAAK,WAAaW,YAAU,O,4CAMrD,OACE,kBAAC5B,EAAWK,YAAZ,KACE,uBAAMY,KAAK,YACX,uBAAMA,KAAK,SACX,uBAAMA,KAAK,Y,sCAKM3B,GACrB,IAAM9D,EAASqG,EAASC,MAAK,SAAAC,GAAC,OAAIA,EAAEC,OAAS1C,EAASG,YAEtD,OAAKjE,EAEgB,IAAjBA,EAAOyG,MACFJ,EAAS/E,QAAO,SAAAiF,GAAC,OAAIA,EAAEG,SAAW1G,EAAO2G,MAG7B,IAAjB3G,EAAOyG,MACFJ,EAAS/E,QAAO,SAAAiF,GAAC,OAAIA,EAAEG,SAAW1G,EAAO0G,UAG3C,GAVa,K,yCAiBKE,GAAO,IAAD,OAC1BC,EAD0B,YACXD,EAAKE,SADM,MAG5B7F,KAAKiE,MAAMC,aACXyB,EAAKE,SAASC,SAAS9F,KAAKiE,MAAMC,cAEnC6B,YAAW,WACT,EAAKd,iBAAiBW,Q,uCASJf,GACtB7E,KAAKgG,SAAS,CAAE9B,YAAaW,Q,GA1GGoB,a,0bCrDpC,IAAM1C,EAAa,CACjB2C,cAAezC,IAAO0C,QAAT,KAWbC,SAAU3C,YAAO2C,IAAP3C,CAAF,MAMW4C,E,wLACKC,EAAMxB,GAAM,IAAD,uBACjC,YAAiBwB,EAAjB,+CAAuB,CAAC,IAAfzB,EAAc,QACrB,GAAIA,EAAKE,QAAUD,EACjB,OAAOD,EAGT,GAAIA,EAAK0B,MACP,OAAOvG,KAAKwG,gBAAgB3B,EAAKgB,SAAUf,IAPd,qF,sEAejC,OACE,kBAAC,EAAWoB,cAAZ,KACGlG,KAAKyG,gBACLzG,KAAK0G,mB,sCAMV,OACE,uBACEvC,UAAU,UACVwC,OAAQ,EACRnC,KAAK,OACLoC,QAAQ,QACRC,MAAM,UAEN,2BACE,uBAAQC,KAAM,GAAIC,KAAK,UAEzB,iDACA,2BACE,uBAAMvC,KAAK,oB,sCAMK,IAAD,OACrB,OACE,kBAAC,WAAD,CAAUC,GAAI9B,IACX,SAAA+B,GAAW,OACV,uBACEM,QAAS,EAAKgC,YAAYtC,GAC1BuC,MAAO,CAAEC,MAAO,IAAKC,WAAY,eACjCC,oBAAqB,EAAKC,qBAAqB3C,GAC/C4C,KAAK,UAEJ,EAAKC,cAAc3C,KAAI,SAAAC,GAAI,OAAI,EAAK2C,YAAY3C,MANnD,IAOG,EAAK4C,eAAe7C,KAAI,SAAAC,GAAI,OAAI,EAAK6C,aAAa7C,Y,kCAO1CH,GACjB,OAAO,YAAc,IAAXI,EAAU,EAAVA,IACFD,EAAOO,EAASC,MAAK,SAAAC,GAAC,OAAIA,EAAEI,GAAGiC,aAAe7C,KAEhDD,GAAQA,EAAKU,MACfb,EAAYvB,QAAQ/B,KAAKyD,EAAKU,S,oCAMlC,OAAOH,EAAS/E,QAAO,SAAAiF,GAAC,OAAgB,IAAZA,EAAEE,QAAgBF,EAAEiB,W,qCAIhD,OAAOnB,EACJ/E,QAAO,SAAAiF,GAAC,OAAIA,EAAEiB,OAAqB,IAAZjB,EAAEE,SACzBoC,QAAO,SAACC,EAAQrI,GACf,IAAIT,EAAS8I,EAAOxC,MAAK,SAAAC,GAAC,OAAIA,EAAEP,QAAUvF,EAAM+G,SAahD,OAXKxH,IACHA,EAAS,CACPgG,MAAOvF,EAAM+G,MACbhB,KAAMuC,KAAKC,SACXlC,SAAU,IAEZgC,EAAOzG,KAAKrC,IAGdA,EAAO8G,SAASzE,KAAK5B,GAEdqI,IACN,M,2CAGqBnD,GAAc,IAChC7B,EAAa6B,EAAb7B,SACJ9D,EAASqG,EAASC,MAAK,SAAAC,GAAC,OAAIA,EAAEC,OAAS1C,EAASG,YAEpD,OAAKjE,GAEgB,IAAjBA,EAAOyG,QACTzG,EAASqG,EAASC,MAAK,SAAAC,GAAC,OAAIA,EAAEI,KAAO3G,EAAO0G,WAGvC,CAAC1G,EAAO2G,GAAGiC,aANE,K,mCASFpB,GAAQ,IAAD,OACzB,OACE,sBAAMyB,UAAN,CAAgBlD,IAAKyB,EAAMxB,MAAOA,MAAOwB,EAAMxB,OAC5CwB,EAAMV,SAASjB,KAAI,SAAAU,GAAC,OAAI,EAAKkC,YAAYlC,S,kCAK7BT,GACjB,OACE,sBAAMoD,KAAN,CAAWnD,IAAKD,EAAKa,IACnB,uBAAKiB,OAAQ,EAAGE,MAAM,SAASrC,KAAK,QAClC,uBACE0D,KAAM,EACN/D,UAAU,sDAEV,kBAAC,EAAWiC,SAAZ,CACE+B,IAAG,gBAAWtD,EAAKkC,KAAhB,QACHqB,gBAAiB,SAAAC,GACfA,EAAIC,aACF,QACA,iDAKR,uBAAKJ,KAAM,IAAKrD,EAAKE,a,GAxIOkB,aCxBjBsC,E,iLAEjB,OACE,sC,GAH8BtC,a,iRCA7B,I,UAAMuC,EAAa/E,IAAOC,IAAV,KAMV+E,EAAUhF,IAAOC,IAAV,K,mDCCPgF,EAAqC,CAEhDC,OAAQ,CACNC,WARe,SASfpE,KAAMqE,gBAAcC,MCNXC,GAAb,EAKGpK,kBAAQ,CACPC,OAAQ8J,EAAiBC,SAN7B,oGAQmBlJ,GACf,OAAOA,EAAciB,cATzB,sHCEasI,EAA2C,CAEtDC,aAAc,CACZL,WARe,eASfpE,KAAMqE,gBAAcC,KAGtBI,QAAS,CACPN,WAbe,eAcfO,OAAQ,UACR3E,KAAMqE,gBAAcC,KAGtBM,UAAW,CACTR,WAnBe,eAoBfO,OAAQ,YACR3E,KAAMqE,gBAAcC,KAGtBO,eAAgB,CACdT,WAzBe,eA0BfO,OAAQ,iBACR3E,KAAMqE,gBAAcC,MCxBXQ,IAAb,EAKG3K,kBAAQ,CACPC,OAAQoK,EAAuBC,eANnC,EAgBGtK,kBAAQ,CACPC,OAAQoK,EAAuBK,iBAjBnC,0GAQyB5J,GACrB,OAAOA,EAAciB,YATzB,wCAmB2BjB,GACvB,OAAOA,EAAciB,cApBzB,gQCPA,SAAS6I,KAA2Q,OAA9PA,GAAWpJ,OAAOqJ,QAAU,SAAUzK,GAAU,IAAK,IAAI0K,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAI3E,KAAO8E,EAAczJ,OAAO0J,UAAUC,eAAenK,KAAKiK,EAAQ9E,KAAQ/F,EAAO+F,GAAO8E,EAAO9E,IAAY,OAAO/F,IAA2BgL,MAAM/J,KAAM0J,WAEhT,SAASM,GAAyBJ,EAAQK,GAAY,GAAc,MAAVL,EAAgB,MAAO,GAAI,IAAkE9E,EAAK2E,EAAnE1K,EAEzF,SAAuC6K,EAAQK,GAAY,GAAc,MAAVL,EAAgB,MAAO,GAAI,IAA2D9E,EAAK2E,EAA5D1K,EAAS,GAAQmL,EAAa/J,OAAOgK,KAAKP,GAAqB,IAAKH,EAAI,EAAGA,EAAIS,EAAWP,OAAQF,IAAO3E,EAAMoF,EAAWT,GAAQQ,EAASG,QAAQtF,IAAQ,IAAa/F,EAAO+F,GAAO8E,EAAO9E,IAAQ,OAAO/F,EAFxMsL,CAA8BT,EAAQK,GAAuB,GAAI9J,OAAOmK,sBAAuB,CAAE,IAAIC,EAAmBpK,OAAOmK,sBAAsBV,GAAS,IAAKH,EAAI,EAAGA,EAAIc,EAAiBZ,OAAQF,IAAO3E,EAAMyF,EAAiBd,GAAQQ,EAASG,QAAQtF,IAAQ,GAAkB3E,OAAO0J,UAAUW,qBAAqB7K,KAAKiK,EAAQ9E,KAAgB/F,EAAO+F,GAAO8E,EAAO9E,IAAU,OAAO/F,EAMne,IAAI0L,GAEJ,IAAMC,cAAc,OAAQ,KAAM,IAAMA,cAAc,QAAS,CAC7DlG,KAAM,cAGJmG,GAEJ,IAAMD,cAAc,OAAQ,CAC1BE,EAAG,+eACHC,KAAM,UACN,OAAQ,OAGN,GAAc,SAAqBC,GACrC,IAAIC,EAASD,EAAKC,OACdhG,EAAQ+F,EAAK/F,MACbf,EAAQgG,GAAyBc,EAAM,CAAC,SAAU,UAEtD,OAAO,IAAMJ,cAAc,MAAOnB,GAAS,CACzCyB,EAAG,cACH7G,UAAW,OACX8G,QAAS,gBACT,OAAQ,KACR/D,MAAO,IACPgE,OAAQ,IACRC,IAAKJ,GACJ/G,GAAQe,EAAQ,IAAM2F,cAAc,QAAS,KAAM3F,GAAS,KAAM0F,GAAOE,KAG1ES,GAAa,IAAMC,YAAW,SAAUrH,EAAOmH,GACjD,OAAO,IAAMT,cAAc,GAAanB,GAAS,CAC/CwB,OAAQI,GACPnH,OAEU,IC3Cf,SAAS,KAA2Q,OAA9P,GAAW7D,OAAOqJ,QAAU,SAAUzK,GAAU,IAAK,IAAI0K,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAI3E,KAAO8E,EAAczJ,OAAO0J,UAAUC,eAAenK,KAAKiK,EAAQ9E,KAAQ/F,EAAO+F,GAAO8E,EAAO9E,IAAY,OAAO/F,IAA2BgL,MAAM/J,KAAM0J,WAEhT,SAAS,GAAyBE,EAAQK,GAAY,GAAc,MAAVL,EAAgB,MAAO,GAAI,IAAkE9E,EAAK2E,EAAnE1K,EAEzF,SAAuC6K,EAAQK,GAAY,GAAc,MAAVL,EAAgB,MAAO,GAAI,IAA2D9E,EAAK2E,EAA5D1K,EAAS,GAAQmL,EAAa/J,OAAOgK,KAAKP,GAAqB,IAAKH,EAAI,EAAGA,EAAIS,EAAWP,OAAQF,IAAO3E,EAAMoF,EAAWT,GAAQQ,EAASG,QAAQtF,IAAQ,IAAa/F,EAAO+F,GAAO8E,EAAO9E,IAAQ,OAAO/F,EAFxM,CAA8B6K,EAAQK,GAAuB,GAAI9J,OAAOmK,sBAAuB,CAAE,IAAIC,EAAmBpK,OAAOmK,sBAAsBV,GAAS,IAAKH,EAAI,EAAGA,EAAIc,EAAiBZ,OAAQF,IAAO3E,EAAMyF,EAAiBd,GAAQQ,EAASG,QAAQtF,IAAQ,GAAkB3E,OAAO0J,UAAUW,qBAAqB7K,KAAKiK,EAAQ9E,KAAgB/F,EAAO+F,GAAO8E,EAAO9E,IAAU,OAAO/F,EAMne,IAAI,GAEJ,IAAM2L,cAAc,OAAQ,KAAM,IAAMA,cAAc,QAAS,CAC7DlG,KAAM,cAGJ,GAEJ,IAAMkG,cAAc,OAAQ,CAC1BE,EAAG,gkBACH,OAAQ,OAGN,GAAU,SAAiBE,GAC7B,IAAIC,EAASD,EAAKC,OACdhG,EAAQ+F,EAAK/F,MACbf,EAAQ,GAAyB8G,EAAM,CAAC,SAAU,UAEtD,OAAO,IAAMJ,cAAc,MAAO,GAAS,CACzCM,EAAG,cACH7G,UAAW,OACX8G,QAAS,gBACT,OAAQ,KACR/D,MAAO,IACPgE,OAAQ,IACRC,IAAKJ,GACJ/G,GAAQe,EAAQ,IAAM2F,cAAc,QAAS,KAAM3F,GAAS,KAAM,GAAO,KAG1E,GAAa,IAAMsG,YAAW,SAAUrH,EAAOmH,GACjD,OAAO,IAAMT,cAAc,GAAS,GAAS,CAC3CK,OAAQI,GACPnH,OAEU,I,y9FCjCf,IAAMT,GAAa,CACjB+H,KAAM7H,IAAO0C,QAAT,MAcJoF,cAAe9H,IAAOC,IAAT,MA2CO,IAAI8H,MAAOC,WA+D/BC,YAAajI,IAAOC,IAAT,OA6CQiI,G,YAInB,WAAY3H,GAAQ,IAAD,8BACjB,4CAAMA,KAJA4H,cAAgB,IAAI7C,EAGT,EAFX8C,oBAAsB,IAAIvC,GAIhC,EAAKrF,MAAQ,CAAE6H,QAAS,GAAIC,WAAY,GAAIC,SAAU,IAFrC,E,sEAMjB,OACE,kBAAC,GAAWV,KAAZ,KACGtL,KAAKiM,qBACLjM,KAAKkM,wBACLlM,KAAKmM,yB,0CAMVnM,KAAKoM,gBACLpM,KAAKqM,mBACLrM,KAAKsM,0B,uCAGiBC,GACtB,OAAIA,EAAQ,IACJ,GAAN,OAAUzE,KAAK0E,MAAMD,EAAQ,KAA7B,UAEOA,I,sCAIa,IAAD,OACrBvM,KAAK4L,cACFa,UAAU,IAAI5M,iBACd6M,WAAU,YAAkB,IAAfZ,EAAc,EAAdA,QACZ,EAAK9F,SAAS,CACZ8F,iB,yCAKmB,IAAD,OACxB9L,KAAK6L,oBACFc,gBACC,IAAI9M,gBAAc,CAChB+M,MAAO,KAGVF,WAAU,YAAiB,IAAd7E,EAAa,EAAbA,OACZ,EAAK7B,SAAS,CACZ+F,WAAYlE,S,8CAKY,IAAD,OAC7B7H,KAAK6L,oBACFgB,kBAAkB,IAAIhN,iBACtB6M,WAAU,YAAiB,IAAd7E,EAAa,EAAbA,OACZiF,QAAQC,IAAIlF,GACZ,EAAK7B,SAAS,CACZgG,SAAUnE,S,2CAMhB,OACE,uBAAUmF,UAAQ,EAAC/F,MAlFT,CACZgG,OAAQ,WAkFHjN,KAAKiE,MAAM6H,QAAQlH,KAAI,SAAA+D,GAAM,OAC5B,yBAAKuE,IAAI,GAAGpI,IAAK6D,EAAOwE,SAAUhF,IAAKQ,EAAOyE,iB,8CAMtB,IAAD,OAC7B,OACE,6BAASnG,MA5FC,CACZgG,OAAQ,WA4FJ,yBAAK9I,UAAU,6CACb,wDACA,uBAAMK,KAAK,WAEb,yBAAKL,UAAU,YACb,kBAAC,GAAWoH,cAAZ,KACE,yBAAKpH,UAAU,SACb,yBACE+I,IAAI,GACJ/E,IAAKkF,EAAQ,OAEf,uBAAMC,UAAWC,MAEnB,yBAAKpJ,UAAU,aAAf,wCACA,yBAAKA,UAAU,qBAEhBnE,KAAKiE,MAAM8H,WAAWnH,KAAI,SAAAC,GAAI,OAC7B,kBAAC,GAAW0G,cAAZ,CAA0BzG,IAAKD,EAAKa,IAClC,yBAAKvB,UAAU,iBACb,yBAAK+I,IAAI,GAAG/E,IAAKtD,EAAK2I,SACtB,yBAAKrJ,UAAU,mBACb,uBAAMmJ,UAAWG,KACjB,8BAAO,EAAKC,iBAAiB7I,EAAK8I,aAEpC,yBAAKxJ,UAAU,kBACb,uBAAMK,KAAK,kBAGf,yBAAKL,UAAU,aAAaU,EAAK7F,c,4CAS3C,OACE,6BAASiI,MAnIC,CACZgG,OAAQ,WAmIJ,yBAAK9I,UAAU,6CACb,wDACA,uBAAMK,KAAK,WAEb,yBAAKL,UAAU,YACZnE,KAAKiE,MAAM+H,SAASpH,KAAI,SAAAC,GAAI,OAC3B,kBAAC,GAAW6G,YAAZ,CAAwB5G,IAAKD,EAAKa,IAChC,yBAAKvB,UAAU,iBACb,yBAAK+I,IAAI,GAAG/E,IAAKtD,EAAK+I,WAExB,yBAAKzJ,UAAU,aAAaU,EAAK7F,gB,GAlIRiH,aC3KhC,SAAS4H,KAAc,IAAD,EACD5K,mBAAS,KADR,mBACpBsJ,EADoB,KACbuB,EADa,KAS3B,OANAC,qBAAU,cAAU,CAACxB,IAMd,CACLA,QACAyB,SANF,WACEF,EAASvB,EAAQ,KASd,ICdc0B,G,mLAEjB,OACE,kBAAC,WAAD,CAAUxJ,GAAIoJ,KACX,SAAAK,GAAK,OACJ,oCACE,6BAAMA,EAAM3B,OACZ,4BACEvH,QAAS,WACPkJ,EAAMF,aAFV,a,+BAaR,OACE,6BACE,kDACChO,KAAKmO,gB,GAvBqBlI,aCSnC,SAASmI,KAEP,IAAMvL,EAAWwL,cACXlL,EAAUmL,cACV5J,EAAc6J,mBAAS5L,GAO7B,OALA6L,IAAMT,WAAU,WACdrJ,EAAYrB,eAAeR,GAC3B6B,EAAYpB,cAAcH,KACzB,CAACN,EAAUM,IAGZ,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOsL,OAAK,EAAClJ,KAAK,KAChB,kBAAC,IAAD,CAAUnE,MAAI,EAACsN,GAAG,yBAEpB,kBAAC,IAAD,CAAOnJ,KAAK,sBAAsBM,SAAU,kBAAC,GAAD,QAC5C,kBAAC,IAAD,CAAON,KAAK,MAAMM,SAAU,kBAAC,GAAD,SAKnB,SAAS8I,KACtB,OACE,kBAAC,IAAD,KACE,kBAACP,GAAD,O,w3BC/BN,IAAM7K,GAAa,CACjBqL,WAAYnL,IAAOC,IAAT,MAOVmL,aAAcpL,IAAOC,IAAT,MAOZoL,WAAYrL,IAAOC,IAAT,MAMVqL,YAAatL,IAAO0C,QAAT,MAOX6I,QAASvL,IAAOwL,KAAT,OAoBIC,GAAb,iLAEI,OACE,kBAAC1G,EAAD,CAAYvB,MATV,CACJC,MAAO,OACPgE,OAAQ,SAQHlL,KAAKmP,eACN,yBAAKlI,MAfD,CACRmI,KAAM,EACNC,SAAU,aAcJ,kBAAC5G,EAAD,CAAStE,UAAU,iBAChBnE,KAAKsP,iBACLtP,KAAKuP,mBAGTvP,KAAKwP,mBAXd,qCAiBI,OACE,kBAAC,GAAWZ,WAAZ,KACE,kBAAC,EAAD,SAnBR,uCAyBI,OACE,kBAAC,GAAWC,aAAZ,KACE,kBAAC,EAAD,SA3BR,sCAiCI,OACE,kBAAC,GAAWC,WAAZ,KACE,kBAAC,EAAD,SAnCR,uCAyCI,OACE,kBAAC,GAAWC,YAAZ,KACE,kBAAC,GAAWC,QAAZ,KACE,kBAACL,GAAD,YA5CV,GAAmC1I,aCpD5B,SAASwJ,KAAa,IAAD,EACCxM,mBAAS,IADV,mBACnB0C,EADmB,KACb+J,EADa,KAS1B,OANA3B,qBAAU,cAAU,CAACpI,IAMd,CACLA,OACAgK,OANF,SAAgBnQ,GACdkQ,EAAWlQ,KASR,ICdDoQ,GAAmB,CjB0BK,SAAA5L,GAC5B,OAAO,kBAAC,WAAD,CAAeS,GAAI9B,GAAcqB,EAAM6B,WgBbpB,SAAA7B,GAC1B,OAAO,kBAAC,WAAD,CAAeS,GAAIgL,IAAYzL,EAAM6B,WJDjB,SAAA7B,GAC3B,OAAO,kBAAC,WAAD,CAAeS,GAAIoJ,IAAa7J,EAAM6B,YKbzCgK,GAAoB,SAAA7L,GAAK,OAC7BA,EAAM4L,UAAUE,aACd,SAACjK,EAAUkK,GAAX,OAAsB,kBAACA,EAAD,KAASlK,KAC/B7B,EAAM6B,WAGGmK,GAAW,SAAAhM,GACtB,OACE,kBAAC,GAAD,CAAmB4L,UAAWA,IAC3B5L,EAAM6B,WCbQoK,G,iLAEjB,OACE,yBAAK9L,UAAU,OACb,kBAAC,GAAD,KACE,kBAAC,GAAD,Y,GALuB8B,aCSbiK,QACW,cAA7BtN,OAAOC,SAASsN,UAEe,UAA7BvN,OAAOC,SAASsN,UAEhBvN,OAAOC,SAASsN,SAASC,MACvB,2D,WClBS,IACbxR,OAAQyR,2BACRC,OAAOD,EACPpP,QAASoP,oHAAYE,oBCDR,WCGb/P,iBAAegQ,UAAU,CACvB5R,OAAQ6R,GAAU7R,OAClBqC,QAASwP,GAAUxP,UAIrBT,iBAAeiB,aAAaC,OAAOgP,KAAI,SAAAC,GAAO,OAAuB,MAAnBA,EAAQjP,UAG1DlB,iBAAeiB,aAAaI,QAAQ6O,KAAI,SAAAC,GAAO,OAAIA,EAAQ7Q,SCL3D8Q,GAEAC,IAASC,OAAO,kBAAC,GAAD,MAASC,SAASC,eAAe,SJ8H7C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAM5P,MAAK,SAAA6P,GACjCA,EAAaC,iB,gCKxIZ,IAAKxI,EAaAyI,EAhBZ,oE,SAGYzI,K,UAAAA,E,YAAAA,E,UAAAA,E,gBAAAA,E,kBAAAA,E,YAAAA,E,eAAAA,M,cAaAyI,O,iBAAAA,I,sBAAAA,M,k1DCXChP,EAAb,iDAISX,SAAmB,EAJ5B,KASSC,iBATT,kDAeanB,GACTT,KAAK2B,SAAU,EACf3B,KAAK4B,YAAcnB,MAjBvB,M,uJCOarB,EAAb,WAoBE,WAAYmS,GAAsC,IAAD,gCAlBjC7L,QAkBiC,OAfjC8L,uBAeiC,OAZjCD,mBAYiC,OATzCE,qBASyC,OAPzCC,mBAOyC,OAJzCC,aAA6BL,IAAaM,MAMhD5R,KAAK0F,GAAKmM,IAAKC,WAEf9R,KAAKuR,cAAgBA,EAErBvR,KAAKwR,kBAAoB,IAAIO,KAAW,SAAAC,GAEtC,EAAKP,gBAAkBO,KA5B7B,6DAoC0BnT,GACtBmB,KAAK0R,cAAgB7S,IArCzB,8BA2CiBY,GAAgD,IAAD,OAE5D,GAAIO,KAAK2R,eAAiBL,IAAaM,MAAO,CAE5C5R,KAAK2R,aAAeL,IAAaW,QAEjC,IAAM5Q,EAAgB,IAAI6Q,IAAclS,KAAKuR,cAAe9R,GAkC5D,OA/BAe,IAAe2R,cACZC,KAAK/Q,GACLE,MAAK,SAACC,GAEL,IAAI1B,EAGFA,EADE,EAAK4R,cACAW,uBAAa,EAAKX,cAAelQ,GAEjCA,EAPc,2BAWvB,YAAsB/B,EAAc6S,mBAApC,+CAAwD,CAAC,IAA9ChS,EAA6C,QACtDA,EAAQ+B,OAAS/B,EAAQ+B,MAAMvC,EAAML,IAZhB,kFAgBvB,EAAKgS,gBAAgBc,KAAKzS,GAC1B,EAAK2R,gBAAgBe,cAEtBC,SAAQ,WAEP,EAAKd,aAAeL,IAAaM,SAElC7P,OAAM,SAAAP,GAEL,EAAKiQ,gBAAgB3P,MAAMN,EAAS1B,SAIjCE,KAAKwR,kBAIZ,OAAOkB,QAvFb,M,8ICJaR,EAAb,WAUE,WACEX,EACA9R,GACC,yBAXc8R,mBAWf,OATe9R,mBASf,EACAO,KAAKuR,cAAgBA,EACrBvR,KAAKP,cAAgBA,EAfzB,yDAqBsB,2BAElB,YAAsBO,KAAKP,cAAc6S,mBAAzC,+CAA6D,CAAC,IAAnDhS,EAAkD,QAC3DA,EAAQ8B,QAAU9B,EAAQ8B,OAAOpC,KAAKP,gBAHtB,kFAMlB,MAAO,CACLkT,IAAKnS,IAAe+B,cAChB/B,IAAe+B,cAAcvC,MAC7BA,KAAKuC,gBACTrB,QAASV,IAAegC,iBACpBhC,IAAegC,iBAAiBxC,MAChCA,KAAKP,cAAcM,QAAQ6S,OAC/BC,OAAQ7S,KAAKuR,cAAc/M,KAE3B1E,KAAME,KAAK8S,mBAAkB,GAE7BC,OAAQ/S,KAAK8S,mBAAkB,GAE/BE,iBAAkB,SAAAD,GAAM,OACtBE,IAAGC,UAAUH,EAAQ,CACnBI,YAAa,SACbC,WAAW,EACXC,WAAW,QA5CrB,sCAqDI,IAAKrT,KAAKuR,cACR,MAAM,IAAI+B,MAAM,mFAgBlB,MAVwB,CACtBtT,KAAKuR,cAAcjR,SAAW,GAC9BN,KAAKuR,cAAc3I,YAAc,GACjC5I,KAAKuR,cAAcpI,QAAU,IAHP,mBAIlBnJ,KAAKP,cAAcM,QAAQwT,OAC3BvT,KAAKP,cAAcM,QAAQwT,OAC3B,KAIoBlT,QAAO,SAAAiF,GAAC,OAAIA,KAAGkO,KAAK,OAtElD,wCA4E4BC,GAExB,OAAIzT,KAAK0T,gBAAkBD,EAClB,GAILA,EACKzT,KAAK2T,gBAAgB3T,KAAKP,cAAcK,MAExC,eAAKE,KAAKP,cAAcK,QAtFrC,oCA8FI,MAAO,CAAC+I,IAAcC,IAAKD,IAAc+K,QAAQ9N,SAC/C9F,KAAKuR,cAAc/M,QA/FzB,sCAuG0BpE,GAEtB,IAAMN,EAAI,eAAQM,GAwBlB,OArBAD,OAAO0T,QAAQ/T,GACZO,QAAO,YAA+B,IAAD,mBAAvBb,GAAuB,WAEpC,YAAcsU,IAAVtU,GAAiC,KAAVA,OAMzBA,aAAiBuU,QACC,IAAjBvU,EAAMmK,SAAgBnK,EAAMwU,OAAM,SAAA1O,GAAC,MAAU,KAANA,SAO3C2O,SAAQ,YAAmB,IAAD,mBAAhBnP,EAAgB,iBAClBhF,EAAKgF,MAGThF,MAjIX,M,6ECPsBS,EAAtB,sCACS6B,YADT,OAGSC,WAHT,K","file":"static/js/main.2bb5450b.chunk.js","sourcesContent":["import { RequestObject } from '../http/request-object'\nimport { RequestParams } from '../http/request-params'\nimport { IRequestServerConfig } from '../http/interfaces'\nimport { Model } from '../model'\n/**\n * 网络请求行为装饰器\n */\nexport function Request({\n  server,\n  model,\n  force\n}: {\n  server: IRequestServerConfig\n  model?: { prototype: Model }\n  force?: boolean\n}) {\n  return (target, name, descriptor) => {\n    const generateRequestObject = () => {\n      // 请求对象\n      const object = new RequestObject(server)\n\n      // 设置响应数据模型\n      if (model) {\n        object.setResponseModel(model)\n      }\n\n      return object\n    }\n\n    const requestObject = generateRequestObject()\n\n    // 存储历史方法\n    const _value = descriptor.value\n\n    // 传入请求方法\n    descriptor.value = (requestParams: RequestParams) => {\n      if (force) {\n        requestParams.setRequestObject(generateRequestObject())\n      } else {\n        // 设置请求对象\n        requestParams.setRequestObject(requestObject)\n      }\n\n      // 传入更新后的请求对象\n      return _value.call(target, requestParams)\n    }\n\n    return descriptor\n  }\n}\n","export abstract class Model {}\n","import { IRequestParamsOption } from './interfaces'\nimport { RequestObject } from './request-object'\nimport { Model } from '../model'\nimport { Observable } from 'rxjs'\nimport { RequestService } from './request-service'\nimport { ExtendService } from './extend-service'\nimport { classToPlain } from 'class-transformer'\n/**\n * 请求参数对象\n */\nexport class RequestParams {\n  public data: any\n  public options: IRequestParamsOption\n  private requestObject!: RequestObject\n  /**\n   * 构造函数\n   * @param data\n   * @param options\n   */\n  constructor(data?, options?: IRequestParamsOption) {\n    this.data = data instanceof Model ? classToPlain(data) : data || {}\n    this.options = options || {}\n  }\n\n  /**\n   * 设置请求对象\n   * @param requestObject\n   */\n  public setRequestObject(requestObject: RequestObject) {\n    this.requestObject = requestObject\n  }\n\n  /**\n   * 获取扩展服务\n   */\n  public getExtendService() {\n    const extendServices = this.options\n      ? Object.values(this.options).filter(\n          service => service instanceof ExtendService\n        )\n      : []\n    return [...extendServices, ...RequestService.extendServices]\n  }\n\n  /**\n   * 对数据进行转换\n   * @param callback\n   */\n  public map(callback) {\n    this.data = callback(this.data)\n  }\n\n  /**\n   * 发送网络请求\n   */\n  public request(): Observable<any> {\n    return this.requestObject.request(this)\n  }\n}\n","export * from './enums'\nexport * from './interfaces'\nexport * from './request-object'\nexport * from './request-params'\nexport * from './request-service'\nexport * from './request-interceptor'\nexport * from './request-option'\nexport * from './extend-service'\nexport * from '../decorators/request.decorators'\n","import axios, { AxiosInstance, AxiosResponse } from 'axios'\nimport { RequestOption } from './request-option'\nimport { RequestInterceptor } from './request-interceptor'\nimport { ExtendService } from './extend-service'\nexport class RequestService {\n  // 基础服务配置\n  public static config = {\n    server: '',\n    timeout: 1000 * 60 * 15\n  }\n\n  // 通讯服务单例\n  private static instance: RequestService\n\n  // 拦截器\n  public static interceptors = {\n    // 前置拦截器\n    before: [],\n    // 后置拦截器\n    after: [],\n    // 状态拦截器\n    status: new RequestInterceptor<boolean>(),\n    // 成功状态拦截器\n    success: new RequestInterceptor(),\n    // 失败状态拦截器\n    error: new RequestInterceptor()\n  }\n\n  // 生成URL地址拦截处理\n  public static getRequestUrl: (option: RequestOption) => string\n\n  // 生成请求头拦截处理\n  public static getRequestHeader: (option: RequestOption) => any\n\n  // 通讯异常处理\n  public static requestCatchHandle: (respone: AxiosResponse) => void\n\n  // 全局扩展服务数组\n  public static extendServices: ExtendService[] = []\n\n  /**\n   * 设置网络请求基础配置\n   * @param param\n   */\n  public static setConfig({ server, timeout }) {\n    RequestService.config.server = server\n    RequestService.config.timeout = timeout\n  }\n\n  /**\n   * 安装通讯扩展服务\n   * @param service\n   */\n  public static installExtendService(service: ExtendService) {\n    RequestService.extendServices.push(service)\n  }\n\n  /**\n   * 获取服务请求单例\n   */\n  public static getInstance() {\n    if (this.instance) {\n      return this.instance\n    }\n\n    return new RequestService()\n  }\n\n  // axios单例\n  private axiosInstance: AxiosInstance\n\n  /**\n   * 构造函数\n   */\n  constructor() {\n    RequestService.instance = this\n\n    // 创建axios实例\n    this.axiosInstance = axios.create({\n      baseURL: RequestService.config.server,\n      timeout: RequestService.config.timeout,\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json'\n      }\n    })\n  }\n\n  /**\n   * 发送网络请求信息\n   * @param param\n   */\n  public send(requestOption: RequestOption) {\n    // 获取配置对象\n    const options = requestOption.getOptions()\n\n    // 发送通讯请求\n    return this.axiosInstance\n      .request({\n        // 默认配置对象\n        ...options\n      })\n      .then((response: AxiosResponse<any>) => {\n        // 网络通讯正常\n        // 无状态拦截器的情况下则返回通讯成功\n        if (!RequestService.interceptors.status.defined) {\n          return RequestService.interceptors.success.defined\n            ? RequestService.interceptors.success.interceptor(response)\n            : response\n        }\n\n        // 状态拦截器转换通讯状态\n        if (RequestService.interceptors.status.interceptor(response)) {\n          // 通讯成功\n          return RequestService.interceptors.success.defined\n            ? RequestService.interceptors.success.interceptor(response)\n            : response\n        } else {\n          // 通讯失败\n          return RequestService.interceptors.error.defined\n            ? RequestService.interceptors.error.interceptor(response)\n            : response\n        }\n      })\n      .catch(ex => {\n        if (RequestService.requestCatchHandle) {\n          RequestService.requestCatchHandle(ex.response)\n        }\n        return Promise.reject(ex)\n      })\n  }\n}\n","module.exports = \"data:image/jpeg;base64,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\"","import React from \"react\";\nimport { useState } from \"react\";\nimport { Provider as StoreProvider } from \"reto\";\n\nexport function RouterStore() {\n  const { hash, search, pathname } = window.location;\n\n  const [location, _updateLocation] = useState({\n    hash,\n    search,\n    pathname\n  });\n\n  const [history, _updateHistory] = useState();\n\n  function updateLocation(value) {\n    _updateLocation(value);\n  }\n\n  function updateHistory(value) {\n    _updateHistory(value);\n  }\n\n  return {\n    location,\n    history,\n    updateLocation,\n    updateHistory\n  };\n}\n\nexport const RouterProvider = props => {\n  return <StoreProvider of={RouterStore}>{props.children}</StoreProvider>;\n};\n","import React, { Component } from \"react\";\nimport { Icon, Input } from \"antd\";\nimport styled from \"styled-components\";\nimport { Consumer } from \"reto\";\nimport { RouterStore } from \"../../../store/router.store\";\nimport menuList from \"../../../assets/json/menu.json\";\n\nconst components = {\n  HistoryWrap: styled.div`\n    flex-basis: 200px;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    & > i {\n      padding: 10px;\n      cursor: pointer;\n    }\n  `,\n  MenuWrap: styled.div`\n    flex: 1;\n    display: flex;\n    flex-wrap: nowrap;\n  `,\n  ToolBarWrap: styled.div`\n    flex-basis: 150px;\n    display: flex;\n    justify-content: flex-end;\n    padding: 0 10px;\n    & > i {\n      padding: 0 8px;\n    }\n  `,\n  HeaderMenuItem: styled.div`\n    padding: 0 15px;\n    color: #7f7f7f;\n    cursor: pointer;\n    &:hover {\n      color: #000000;\n    }\n    &.actived {\n      color: #000000;\n      font-weight: bold;\n    }\n  `,\n  SearchWrap: styled.div`\n    flex-basis: 150px;\n    input {\n      border-radius: 20px;\n      height: 27px;\n      background: #f1f1f1;\n    }\n    .ant-input-group-addon {\n      border-radius: 20px;\n    }\n  `\n};\n\ninterface HeaderState {\n  currentMenu: any;\n}\n\nexport default class Header extends Component<{}, HeaderState> {\n  constructor(props) {\n    super(props);\n    this.state = { currentMenu: null };\n  }\n\n  public render() {\n    return (\n      <section className=\"full-absolute flex-row align-items-center\">\n        {this.getHistoryContainer()}\n        {this.getMenuContainer()}\n        {this.getSearchContainer()}\n        {this.getToolbarContainer()}\n      </section>\n    );\n  }\n\n  public getHistoryContainer() {\n    return (\n      <components.HistoryWrap className=\"full-height\">\n        <Icon type=\"left\" />\n        <Icon type=\"right\" />\n      </components.HistoryWrap>\n    );\n  }\n\n  public getMenuContainer() {\n    return (\n      <components.MenuWrap>\n        <Consumer of={RouterStore}>\n          {routerStore =>\n            this.getMenuChildren(routerStore.location).map(item => (\n              <components.HeaderMenuItem\n                key={item.title}\n                className={\n                  this.state.currentMenu &&\n                  this.state.currentMenu.title === item.title\n                    ? \"actived\"\n                    : \"\"\n                }\n                onClick={() => this.onSelectMenuItem(item)}\n              >\n                {item.title}\n              </components.HeaderMenuItem>\n            ))\n          }\n        </Consumer>\n      </components.MenuWrap>\n    );\n  }\n\n  public getSearchContainer() {\n    return (\n      <components.SearchWrap>\n        <Input prefix={<Icon type=\"search\" />} allowClear></Input>\n      </components.SearchWrap>\n    );\n  }\n\n  public getToolbarContainer() {\n    return (\n      <components.ToolBarWrap>\n        <Icon type=\"setting\" />\n        <Icon type=\"mail\" />\n        <Icon type=\"skin\" />\n      </components.ToolBarWrap>\n    );\n  }\n\n  public getMenuChildren(location) {\n    const target = menuList.find(x => x.path === location.pathname);\n    \n    if (!target) return [];\n\n    if (target.level === 1) {\n      return menuList.filter(x => x.parent === target.id);\n    }\n\n    if (target.level === 2) {\n      return menuList.filter(x => x.parent === target.parent);\n    }\n\n    return [];\n  }\n\n  /**\n   * 设置默认菜单项\n   * @param menu\n   */\n  private setDefaultMenuItem(menu) {\n    let [defaultItem] = menu.children;\n    if (\n      !this.state.currentMenu ||\n      !menu.children.includes(this.state.currentMenu)\n    ) {\n      setTimeout(() => {\n        this.onSelectMenuItem(defaultItem);\n      });\n    }\n  }\n\n  /**\n   * 选择菜单项目\n   * @param item\n   */\n  public onSelectMenuItem(item) {\n    this.setState({ currentMenu: item });\n  }\n}\n","import React, { Component } from \"react\";\nimport { Menu, Icon, Avatar, Row, Col } from \"antd\";\nimport menuList from \"../../../assets/json/menu.json\";\nimport { ReactSVG } from \"react-svg\";\nimport { Consumer } from \"reto\";\nimport styled from \"styled-components\";\nimport { RouterStore } from \"../../../store/router.store\";\n\nconst components = {\n  ComponentWrap: styled.section`\n    .ant-menu-item.ant-menu-item-active {\n      color: #000;\n      fill: #000;\n    }\n\n    .ant-menu-item.ant-menu-item-selected {\n      color: red;\n      fill: red;\n    }\n  `,\n  ReactSVG: styled(ReactSVG)`\n    width: 28px;\n    height: 28px;\n  `\n};\n\nexport default class SideMenu extends Component {\n  private findCurrentMenu(list, key) {\n    for (let item of list) {\n      if (item.title === key) {\n        return item;\n      }\n\n      if (item.group) {\n        return this.findCurrentMenu(item.children, key);\n      }\n    }\n  }\n\n  public onUserClick() {}\n\n  public render() {\n    return (\n      <components.ComponentWrap>\n        {this.userContainer()}\n        {this.menuContainer()}\n      </components.ComponentWrap>\n    );\n  }\n\n  public userContainer() {\n    return (\n      <Row\n        className=\"padding\"\n        gutter={8}\n        type=\"flex\"\n        justify=\"start\"\n        align=\"middle\"\n      >\n        <Col>\n          <Avatar size={40} icon=\"user\" />\n        </Col>\n        <Col>未登录</Col>\n        <Col>\n          <Icon type=\"caret-right\" />\n        </Col>\n      </Row>\n    );\n  }\n\n  public menuContainer() {\n    return (\n      <Consumer of={RouterStore}>\n        {routerStore => (\n          <Menu\n            onClick={this.onMenuClick(routerStore)}\n            style={{ width: 200, background: \"transparent\" }}\n            defaultSelectedKeys={this.getDefaultSelectKeys(routerStore)}\n            mode=\"inline\"\n          >\n            {this.getItemList().map(item => this.getMenuItem(item))},\n            {this.getGroupList().map(item => this.getMenuGroup(item))}\n          </Menu>\n        )}\n      </Consumer>\n    );\n  }\n\n  public onMenuClick(routerStore) {\n    return ({ key }) => {\n      const item = menuList.find(x => x.id.toString() === key);\n\n      if (item && item.path) {\n        routerStore.history.push(item.path);\n      }\n    };\n  }\n\n  public getItemList() {\n    return menuList.filter(x => x.level === 1 && !x.group);\n  }\n\n  public getGroupList() {\n    return menuList\n      .filter(x => x.group && x.level === 1)\n      .reduce((result, value) => {\n        let target = result.find(x => x.title === value.group);\n\n        if (!target) {\n          target = {\n            title: value.group,\n            path: Math.random(),\n            children: []\n          };\n          result.push(target);\n        }\n\n        target.children.push(value);\n\n        return result;\n      }, [] as any[]);\n  }\n\n  public getDefaultSelectKeys(routerStore) {\n    const { location } = routerStore;\n    let target = menuList.find(x => x.path === location.pathname) as any;\n\n    if (!target) return [];\n\n    if (target.level !== 1) {\n      target = menuList.find(x => x.id === target.parent);\n    }\n\n    return [target.id.toString()];\n  }\n\n  public getMenuGroup(group) {\n    return (\n      <Menu.ItemGroup key={group.title} title={group.title}>\n        {group.children.map(x => this.getMenuItem(x))}\n      </Menu.ItemGroup>\n    );\n  }\n\n  public getMenuItem(item) {\n    return (\n      <Menu.Item key={item.id}>\n        <Row gutter={8} align=\"middle\" type=\"flex\">\n          <Col\n            span={6}\n            className=\"flex-row justify-content-center align-items-center\"\n          >\n            <components.ReactSVG\n              src={`icons/${item.icon}.svg`}\n              beforeInjection={svg => {\n                svg.setAttribute(\n                  \"style\",\n                  \"height: 25px;width:25px;line-height:25px;\"\n                );\n              }}\n            />\n          </Col>\n          <Col span={18}>{item.title}</Col>\n        </Row>\n      </Menu.Item>\n    );\n  }\n}\n","import React, { Component } from \"react\";\n\nexport default class Footer extends Component {\n  public render() {\n    return (\n      <section>\n        {/* <audio src=\"http://m8.music.126.net/20191216212136/0aa749fd3e2cc71bde0e919f4b8c2aa1/ymusic/0fd6/4f65/43ed/a8772889f38dfcb91c04da915b301617.mp3\"></audio> */}\n      </section>\n    );\n  }\n}\n","import styled from \"styled-components\";\n\nexport const FlexColumn = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n`;\n\nexport const FlexRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n`;\n","import { RequestMethod } from '../../core/http'\nimport { ControllerConfig } from '../type.config'\n\n// 控制器名称\nconst controller = 'banner'\n\n/**\n * Banner接口配置\n */\nexport const BannerController: ControllerConfig = {\n  // 获取Banner\n  banner: {\n    controller,\n    type: RequestMethod.Get\n  }\n}\n","import { BannerController } from '../config/services/banner.controller'\nimport { Request, RequestParams } from '../core/http'\nimport { Observable } from 'rxjs'\n\n/**\n * Banner API服务\n */\nexport class BannerService {\n  /**\n   * 查询Banner\n   * @param requestParams\n   */\n  @Request({\n    server: BannerController.banner\n  })\n  public getBanner(requestParams: RequestParams): Observable<any> {\n    return requestParams.request()\n  }\n}\n","import { RequestMethod } from '../../core/http'\nimport { ControllerConfig } from '../type.config'\n\n// 控制器名称\nconst controller = 'personalized'\n\n/**\n * personalized接口配置\n */\nexport const PersonalizedController: ControllerConfig = {\n  // 获取Banner\n  personalized: {\n    controller,\n    type: RequestMethod.Get\n  },\n  // 推荐新音乐\n  newsong: {\n    controller,\n    action: \"newsong\",\n    type: RequestMethod.Get\n  },\n  // 推荐电台\n  djprogram: {\n    controller,\n    action: \"djprogram\",\n    type: RequestMethod.Get\n  },\n  // 独家放送\n  privatecontent: {\n    controller,\n    action: \"privatecontent\",\n    type: RequestMethod.Get\n  }\n}\n","import { PersonalizedController } from '../config/services/personalized.controller'\nimport { Request, RequestParams } from '../core/http'\nimport { Observable } from 'rxjs'\n\n/**\n * Banner API服务\n */\nexport class PersonalizedService {\n  /**\n   * 查询推荐歌单\n   * @param requestParams\n   */\n  @Request({\n    server: PersonalizedController.personalized,\n  })\n  public getPersonalized(requestParams: RequestParams): Observable<any> {\n    return requestParams.request()\n  }\n\n  /**\n   * 查询独家放送\n   * @param requestParams\n   */\n  @Request({\n    server: PersonalizedController.privatecontent\n  })\n  public getPrivateContent(requestParams: RequestParams): Observable<any> {\n    return requestParams.request()\n  }\n\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", {\n  type: \"text/css\"\n}));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M768 153.6v25.6a25.6 25.6 0 1 1-51.2 0V153.6H307.2v25.6a25.6 25.6 0 0 1-51.2 0V153.6H153.6a51.2 51.2 0 0 0-51.2 51.2v153.6h819.2V204.8a51.2 51.2 0 0 0-51.2-51.2h-102.4z m0-51.2h102.4a102.4 102.4 0 0 1 102.4 102.4v665.6a102.4 102.4 0 0 1-102.4 102.4H153.6a102.4 102.4 0 0 1-102.4-102.4V204.8a102.4 102.4 0 0 1 102.4-102.4h102.4v-25.6a25.6 25.6 0 0 1 51.2 0V102.4h409.6v-25.6a25.6 25.6 0 1 1 51.2 0V102.4zM102.4 409.6v460.8a51.2 51.2 0 0 0 51.2 51.2h716.8a51.2 51.2 0 0 0 51.2-51.2V409.6H102.4z\",\n  fill: \"#ffffff\",\n  \"p-id\": 3886\n});\n\nvar SvgCalendar = function SvgCalendar(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    t: 1578746178787,\n    className: \"icon\",\n    viewBox: \"0 0 1024 1024\",\n    \"p-id\": 3885,\n    width: 200,\n    height: 200,\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgCalendar, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/calendar.e4bf36a8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"style\", {\n  type: \"text/css\"\n}));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M228.97664 141.85472A25.6 25.6 0 0 0 225.28 155.10528v713.79456a25.6 25.6 0 0 0 38.85056 21.90336l546.51392-330.60864c26.61376-16.1024 35.13856-50.72896 19.03616-77.34272a56.32 56.32 0 0 0-19.03616-19.03616L264.13056 133.20192a25.6 25.6 0 0 0-35.15392 8.6528zM174.08 868.89984V155.10528a76.8 76.8 0 0 1 11.08992-39.75168c21.95456-36.29056 69.1712-47.91296 105.46176-25.9584l546.51392 330.61376a107.52 107.52 0 0 1 36.34688 36.34176c30.73536 50.80576 14.464 116.9152-36.34688 147.65056l-546.5088 330.61376A76.8 76.8 0 0 1 250.88 945.69984c-42.41408 0-76.8-34.3808-76.8-76.8z\",\n  \"p-id\": 1157\n});\n\nvar SvgPlay = function SvgPlay(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    t: 1578672832056,\n    className: \"icon\",\n    viewBox: \"0 0 1024 1024\",\n    \"p-id\": 1156,\n    width: 200,\n    height: 200,\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgPlay, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/play.0db1aaa9.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Component, Props } from \"react\";\nimport styled from \"styled-components\";\nimport { Carousel, Icon } from \"antd\";\nimport { BannerService } from \"../../services/banner.service\";\nimport { RequestParams } from \"../../core/http\";\nimport { PersonalizedService } from \"../../services/personalized.service\";\nimport { ReactComponent as CanlendarSvg } from \"../../assets/icons/calendar.svg\";\nimport { ReactComponent as PlaySvg } from \"../../assets/icons/play.svg\";\n\nconst components = {\n  Wrap: styled.section`\n    .ant-carousel {\n      .slick-slide {\n        text-align: center;\n        background: #364d79;\n        overflow: hidden;\n        border-radius: 10px;\n      }\n    }\n    h3 {\n      margin-bottom: 0;\n      margin-right: 5px;\n    }\n  `,\n  RecommendItem: styled.div`\n    width: 20%;\n    padding: 5px 10px;\n    border-radius: 10px;\n    position: relative;\n    cursor: pointer;\n\n    img {\n      width: 100%;\n      border-radius: 10px;\n    }\n\n    .today {\n      position: relative;\n\n      i {\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        svg {\n          height: 50%;\n          width: 50%;\n        }\n\n        &::after {\n          position: absolute;\n          left: 0;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          font-size: 24px;\n          color: #fff;\n          font-weight: bold;\n          margin-top: 15%;\n          content: \"${new Date().getDate()}\";\n          transform: scaleY(1.25);\n        }\n      }\n    }\n\n    .img-container{\n      position: relative;\n\n      .item-play-count {\n        position:absolute;\n        top:5px;\n        right:5px;\n        font-size:12px;\n        color:#fff;\n        fill:#fff;\n        i{\n          margin-right:3px;\n        }\n      }\n\n      .item-play-icon{\n        display:none;\n        position: absolute;\n        right: 10px;\n        bottom: 10px;\n        width:30px;\n        height:30px;\n        border-radius:30px;\n        background-color:rgba(255,255,255,0.4);\n      \n        justify-content: center;\n        align-items: center;\n        svg{\n          width:20px;\n          height:20px;\n          fill: red;\n        }\n      }\n\n      &:hover{\n        .item-play-icon{\n          display: flex;\n        }\n      }\n    }\n\n    .item-name {\n      margin-top: 5px;\n      height: 3em;\n      font-size:12px;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      white-space: pre-wrap;\n      display: -webkit-box;\n      -webkit-line-clamp: 2;\n      -webkit-box-orient: vertical;\n\n      &:hover{\n        font-weight:500;\n      }\n    }\n  `,\n  PrivateItem: styled.div`\n    width: 25%;\n    padding: 5px 10px;\n    border-radius: 10px;\n    position: relative;\n    cursor: pointer;\n\n    img {\n      width: 100%;\n      border-radius: 10px;\n    }\n\n    .item-name {\n      margin-top: 5px;\n      height: 3em;\n      font-size: 12px;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      white-space: pre-wrap;\n      display: -webkit-box;\n      -webkit-line-clamp: 2;\n      -webkit-box-orient: vertical;\n\n      &:hover {\n        font-weight: 500;\n      }\n    }\n  `\n};\n\nconst styles = (\n  props?: Props<any>\n): { [key: string]: React.CSSProperties } => ({\n  marginBottom: {\n    margin: \"30px 0\"\n  }\n});\n\ninterface RecommendState {\n  banners: any[];\n  recommends: any[];\n  privates: any[];\n}\n\n// 使用通过hooks创建通过component访问的store\nexport default class Recommend extends Component<{}, RecommendState> {\n  private bannerService = new BannerService();\n  private personalizedService = new PersonalizedService();\n\n  constructor(props) {\n    super(props);\n    this.state = { banners: [], recommends: [], privates: [] };\n  }\n\n  public render() {\n    return (\n      <components.Wrap>\n        {this.getBannerContainer()}\n        {this.getRecommendContainer()}\n        {this.getPrivateContainer()}\n      </components.Wrap>\n    );\n  }\n\n  public componentDidMount() {\n    this.getBannerList();\n    this.getRecommendList();\n    this.getPrivateContentList();\n  }\n\n  public convertPlayCount(count) {\n    if (count > 10000) {\n      return `${Math.floor(count / 10000)}万`;\n    } else {\n      return count;\n    }\n  }\n\n  public getBannerList() {\n    this.bannerService\n      .getBanner(new RequestParams())\n      .subscribe(({ banners }) => {\n        this.setState({\n          banners\n        });\n      });\n  }\n\n  public getRecommendList() {\n    this.personalizedService\n      .getPersonalized(\n        new RequestParams({\n          limit: 9\n        })\n      )\n      .subscribe(({ result }) => {\n        this.setState({\n          recommends: result\n        });\n      });\n  }\n\n  public getPrivateContentList() {\n    this.personalizedService\n      .getPrivateContent(new RequestParams())\n      .subscribe(({ result }) => {\n        console.log(result);\n        this.setState({\n          privates: result\n        });\n      });\n  }\n\n  public getBannerContainer() {\n    return (\n      <Carousel autoplay style={styles().marginBottom}>\n        {this.state.banners.map(banner => (\n          <img alt=\"\" key={banner.targetId} src={banner.imageUrl}></img>\n        ))}\n      </Carousel>\n    );\n  }\n\n  public getRecommendContainer() {\n    return (\n      <section style={styles().marginBottom}>\n        <div className=\"flex-row align-items-center margin-bottom\">\n          <h3>推荐歌单</h3>\n          <Icon type=\"right\"></Icon>\n        </div>\n        <div className=\"flex-row\">\n          <components.RecommendItem>\n            <div className=\"today\">\n              <img\n                alt=\"\"\n                src={require(\"../../assets/images/play-bg.jpg\")}\n              ></img>\n              <Icon component={CanlendarSvg as any}></Icon>\n            </div>\n            <div className=\"item-name\">每日歌曲推荐</div>\n            <div className=\"item-play-count\"></div>\n          </components.RecommendItem>\n          {this.state.recommends.map(item => (\n            <components.RecommendItem key={item.id}>\n              <div className=\"img-container\">\n                <img alt=\"\" src={item.picUrl}></img>\n                <div className=\"item-play-count\">\n                  <Icon component={PlaySvg as any}></Icon>\n                  <span>{this.convertPlayCount(item.playCount)}</span>\n                </div>\n                <div className=\"item-play-icon\">\n                  <Icon type=\"caret-right\" />\n                </div>\n              </div>\n              <div className=\"item-name\">{item.name}</div>\n            </components.RecommendItem>\n          ))}\n        </div>\n      </section>\n    );\n  }\n\n  public getPrivateContainer() {\n    return (\n      <section style={styles().marginBottom}>\n        <div className=\"flex-row align-items-center margin-bottom\">\n          <h3>独家放送</h3>\n          <Icon type=\"right\"></Icon>\n        </div>\n        <div className=\"flex-row\">\n          {this.state.privates.map(item => (\n            <components.PrivateItem key={item.id}>\n              <div className=\"img-container\">\n                <img alt=\"\" src={item.sPicUrl}></img>\n              </div>\n              <div className=\"item-name\">{item.name}</div>\n            </components.PrivateItem>\n          ))}\n        </div>\n      </section>\n    );\n  }\n}\n","import React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { Provider as StoreProvider } from \"reto\";\n\nexport function Test2Store() {\n  const [count, setCount] = useState(100);\n\n  useEffect(() => {}, [count]);\n\n  function increase() {\n    setCount(count + 1);\n  }\n\n  return {\n    count,\n    increase\n  };\n}\n\nexport const Test2Provider = props => {\n  return <StoreProvider of={Test2Store}>{props.children}</StoreProvider>;\n};\n","import React, { Component } from \"react\";\nimport { Consumer } from \"reto\";\nimport { Test2Store } from \"../store/test2\";\n\n// 使用通过hooks创建通过component访问的store\nexport default class Index extends Component {\n  public getStore() {\n    return (\n      <Consumer of={Test2Store}>\n        {store => (\n          <>\n            <div>{store.count}</div>\n            <button\n              onClick={() => {\n                store.increase();\n              }}\n            >\n              123\n            </button>\n          </>\n        )}\n      </Consumer>\n    );\n  }\n  public render() {\n    return (\n      <div>\n        <div>测试store</div>\n        {this.getStore()}\n      </div>\n    );\n  }\n}\n\n// 使用基于hooks的store\n// export default function() {\n//   // 声明一个新的叫做 “count” 的 state 变量\n//   const [count, setCount] = useState(0);\n\n//   return (\n//     <div>\n//       <p>You clicked {count} times</p>\n//       <button onClick={() => setCount(count + 1)}>Click me</button>\n//     </div>\n//   );\n// }\n","import React from \"react\";\nimport {\n  BrowserRouter,\n  Switch,\n  Route,\n  Redirect,\n  useLocation,\n  useHistory\n} from \"react-router-dom\";\nimport Recommend from \"./pages/discover/recommend\";\nimport { useStore } from \"reto\";\nimport { RouterStore } from \"./store/router.store\";\nimport Index from \"./pages\";\n\nfunction RouterContainer() {\n  // 安装useLocation\n  const location = useLocation();\n  const history = useHistory();\n  const routerStore = useStore(RouterStore);\n\n  React.useEffect(() => {\n    routerStore.updateLocation(location);\n    routerStore.updateHistory(history);\n  }, [location, history]);\n\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n        <Redirect push to=\"/discover/recommend\"></Redirect>\n      </Route>\n      <Route path=\"/discover/recommend\" children={<Recommend />}></Route>\n      <Route path=\"/fm\" children={<Index />}></Route>\n    </Switch>\n  );\n}\n\nexport default function Router() {\n  return (\n    <BrowserRouter>\n      <RouterContainer></RouterContainer>\n    </BrowserRouter>\n  );\n}\n","import React, { Component, Props } from \"react\";\nimport styled from \"styled-components\";\nimport Header from \"./components/default/header.component\";\nimport SideMenu from \"./components/default/side-menu.component\";\nimport Footer from \"./components/default/footer.component\";\nimport { FlexRow, FlexColumn } from \"../shared/components\";\nimport Router from \"../Router\";\n\nconst components = {\n  HeaderWrap: styled.div`\n    flex-basis: 50px;\n    height: 50px;\n    min-height: 50px;\n    position: relative;\n    background-color: #f7f7f7;\n  `,\n  SideMenuWrap: styled.div`\n    flex-basis: 200px;\n    width: 200px;\n    overflow: auto;\n    position: relative;\n    background-color: #ededed;\n  `,\n  FooterWrap: styled.div`\n    flex-basis: 50px;\n    height: 50px;\n    min-height: 50px;\n    position: relative;\n  `,\n  ContentWrap: styled.section`\n    overflow: auto;\n    flex: 1;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n  `,\n  Content: styled.main`\n    max-width: 1100px;\n    min-width: 700px;\n    padding: 0 25px;\n  `\n};\n\nconst styles = (\n  props?: Props<any>\n): { [key: string]: React.CSSProperties } => ({\n  autoFlex: {\n    flex: 1,\n    position: \"relative\"\n  },\n  full: {\n    width: \"100%\",\n    height: \"100%\"\n  }\n});\n\nexport class DefaultLayout extends Component {\n  public render() {\n    return (\n      <FlexColumn style={styles().full}>\n        {this.layoutHeader()}\n        <div style={styles().autoFlex}>\n          <FlexRow className=\"full-absolute\">\n            {this.layoutSideMenu()}\n            {this.lauyoutContent()}\n          </FlexRow>\n        </div>\n        {this.lauyoutFooter()}\n      </FlexColumn>\n    );\n  }\n\n  public layoutHeader() {\n    return (\n      <components.HeaderWrap>\n        <Header></Header>\n      </components.HeaderWrap>\n    );\n  }\n\n  public layoutSideMenu() {\n    return (\n      <components.SideMenuWrap>\n        <SideMenu></SideMenu>\n      </components.SideMenuWrap>\n    );\n  }\n\n  public lauyoutFooter() {\n    return (\n      <components.FooterWrap>\n        <Footer></Footer>\n      </components.FooterWrap>\n    );\n  }\n\n  public lauyoutContent() {\n    return (\n      <components.ContentWrap>\n        <components.Content>\n          <Router></Router>\n        </components.Content>\n      </components.ContentWrap>\n    );\n  }\n}\n","import React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { Provider as StoreProvider } from \"reto\";\n\nexport function MenuStore() {\n  const [menu, updateMenu] = useState({} as any);\n\n  useEffect(() => {}, [menu]);\n\n  function update(value) {\n    updateMenu(value);\n  }\n\n  return {\n    menu,\n    update\n  };\n}\n\nexport const MenuProvider = props => {\n  return <StoreProvider of={MenuStore}>{props.children}</StoreProvider>;\n};\n","import React from \"react\";\n\nimport { RouterProvider } from \"./router.store\";\nimport { MenuProvider } from \"./menu.store\";\nimport { Test2Provider } from \"./test2\";\nconst providers: any[] = [RouterProvider, MenuProvider, Test2Provider];\n\nconst ProvidersComposer = props =>\n  props.providers.reduceRight(\n    (children, Parent) => <Parent>{children}</Parent>,\n    props.children\n  );\n\nexport const Provider = props => {\n  return (\n    <ProvidersComposer providers={providers}>\n      {props.children}\n    </ProvidersComposer>\n  );\n};\n","import React, { Component } from \"react\";\nimport { DefaultLayout } from \"./layout/default.layout\";\nimport { Provider } from \"./store\";\nexport default class App extends Component {\n  public render() {\n    return (\n      <div className=\"app\">\n        <Provider>\n          <DefaultLayout></DefaultLayout>\n        </Provider>\n      </div>\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export default {\n  server: process.env.REACT_APP_SERVER, // 后端服务地址\n  debug: process.env.NODE_ENV === 'development',\n  timeout: process.env.REACT_APP_TIMEOUT\n}\n","import httpBoot from './http.boot'\n\nexport default function () {\n  httpBoot()\n}","import { RequestService } from \"../core/http\";\nimport appConfig from \"../config/app.config\";\n\nexport default function () {\n  // 配置服务端信息\n  RequestService.setConfig({\n    server: appConfig.server,\n    timeout: appConfig.timeout\n  })\n\n  // 状态拦截器\n  RequestService.interceptors.status.use(respone => respone.status === 200)\n\n  // 添加成功拦截器\n  RequestService.interceptors.success.use(respone => respone.data)\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport \"./assets/styles/style.less\";\nimport bootstrap from \"./bootstrap\";\n\nfunction startUp() {\n  bootstrap();\n\n  ReactDOM.render(<App />, document.getElementById(\"root\"));\n\n  // If you want your app to work offline and load faster, you can change\n  // unregister() to register() below. Note this comes with some pitfalls.\n  // Learn more about service workers: https://bit.ly/CRA-PWA\n  serviceWorker.unregister();\n}\n\nstartUp();\n","/**\n * 请求方法类型\n */\nexport enum RequestMethod {\n  Get = 'GET',\n  Post = 'POST',\n  Put = 'PUT',\n  Delete = 'DELETE',\n  Options = 'OPTIONS',\n  Head = 'HEAD',\n  Patch = 'PATCH'\n}\n\n/**\n * 通讯状态\n */\nexport enum RequestState {\n  Ready, // 准备发送请求\n  Loading // 请求发送中\n}\n","import { AxiosResponse } from 'axios'\n\n/**\n * 请求拦截器\n */\nexport class RequestInterceptor<T> {\n  /**\n   * 拦截器状态\n   */\n  public defined: boolean = false\n\n  /**\n   * 拦截器\n   */\n  public interceptor!: (response: AxiosResponse) => T\n\n  /**\n   * 注册拦截器\n   * @param callback\n   */\n  public use(callback: (response: AxiosResponse) => T) {\n    this.defined = true\n    this.interceptor = callback\n  }\n}\n","import { Observable, EMPTY, Subscriber } from 'rxjs'\nimport { RequestParams } from './request-params'\nimport { RequestOption } from './request-option'\nimport { IRequestServerConfig } from './interfaces'\nimport { RequestState } from './enums'\nimport { RequestService } from './request-service'\nimport { plainToClass } from 'class-transformer'\nimport UUID from 'uuidjs'\n\n/**\n * 请求对象\n */\nexport class RequestObject {\n  // 请求对象id\n  public readonly id\n\n  // 请求观察对象\n  public readonly requestObservable\n\n  // 请求服务对象\n  public readonly requestServer: IRequestServerConfig\n\n  // 请求观察者\n  private requestObserver!: Subscriber<any>\n\n  private responseModel\n\n  // 通讯状态\n  private requestState: RequestState = RequestState.Ready\n  /**\n   * 构造函数\n   */\n  constructor(requestServer: IRequestServerConfig) {\n    // 生成请求对象id\n    this.id = UUID.generate()\n    // 设置请求服务对象\n    this.requestServer = requestServer\n    // 设置可观察对象\n    this.requestObservable = new Observable(observer => {\n      // 设置观察者\n      this.requestObserver = observer\n    })\n  }\n\n  /**\n   * 设置响应数据模型\n   * @param model\n   */\n  public setResponseModel(model) {\n    this.responseModel = model\n  }\n\n  /**\n   * 发送网络请求\n   */\n  public request(requestParams: RequestParams): Observable<any> {\n    // 如果通讯实体未占用则发送通讯数据\n    if (this.requestState === RequestState.Ready) {\n      // 修改网络通讯状态\n      this.requestState = RequestState.Loading\n      // 生成通讯配置对象\n      const requestOption = new RequestOption(this.requestServer, requestParams)\n\n      // 发送网络请求\n      RequestService.getInstance()\n        .send(requestOption)\n        .then((response: any) => {\n          // 转换数据结构\n          let data\n\n          if (this.responseModel) {\n            data = plainToClass(this.responseModel, response)\n          } else {\n            data = response\n          }\n\n          // 应用扩展\n          for (const service of requestParams.getExtendService()) {\n            service.after && service.after(data, requestParams)\n          }\n\n          // 通讯结果正常\n          this.requestObserver.next(data)\n          this.requestObserver.complete()\n        })\n        .finally(() => {\n          // 重置通讯状态\n          this.requestState = RequestState.Ready\n        })\n        .catch(response => {\n          // 通讯结果异常\n          this.requestObserver.error(response.data)\n        })\n\n      // 返回观察对象\n      return this.requestObservable\n    } else {\n      // 通讯实体占用中\n      // 忽略进入的请求\n      return EMPTY\n    }\n  }\n}\n","import Qs from 'qs'\nimport { IRequestServerConfig } from './interfaces'\nimport { RequestParams } from './request-params'\nimport { RequestMethod } from './enums'\nimport { RequestService } from './request-service'\n/**\n * 请求配置对象\n */\nexport class RequestOption {\n  // 请求服务对象\n  private readonly requestServer: IRequestServerConfig\n  // 请求参数对象\n  private readonly requestParams: RequestParams\n  /**\n   * 构造函数\n   * @param requestServer 请求服务\n   * @param params 请求参数\n   */\n  constructor(\n    requestServer: IRequestServerConfig,\n    requestParams: RequestParams\n  ) {\n    this.requestServer = requestServer\n    this.requestParams = requestParams\n  }\n\n  /**\n   * 获取请求选项\n   */\n  public getOptions() {\n    // 应用扩展\n    for (const service of this.requestParams.getExtendService()) {\n      service.before && service.before(this.requestParams)\n    }\n\n    return {\n      url: RequestService.getRequestUrl\n        ? RequestService.getRequestUrl(this)\n        : this.getRequestUrl(),\n      headers: RequestService.getRequestHeader\n        ? RequestService.getRequestHeader(this)\n        : this.requestParams.options.header,\n      method: this.requestServer.type,\n      // 获取post请求参数\n      data: this.getParamsByMethod(false),\n      // 获取get请求参数\n      params: this.getParamsByMethod(true),\n      // 序列化参数:用于GET请求\n      paramsSerializer: params =>\n        Qs.stringify(params, {\n          arrayFormat: 'repeat',\n          skipNulls: true,\n          allowDots: true\n        })\n    }\n  }\n\n  /**\n   * 获取目标url地址\n   */\n  public getRequestUrl() {\n    if (!this.requestServer) {\n      throw new Error('server配置异常,请检查对应server配置')\n    }\n\n    // 服务地址数组\n    // 地址组合规则为\n    // : baseUrl/service/controller/action/append\n    const requestServerArray = [\n      this.requestServer.service || '',\n      this.requestServer.controller || '',\n      this.requestServer.action || '',\n      ...(this.requestParams.options.append\n        ? this.requestParams.options.append\n        : [])\n    ]\n\n    // 组合为url形式\n    return requestServerArray.filter(x => x).join('/')\n  }\n\n  /**\n   * 请求类型返回请求参数\n   */\n  private getParamsByMethod(isGet: boolean) {\n    // 请求返回非当前请求方式则返回{}\n    if (this.isGetMethod() !== isGet) {\n      return {}\n    }\n\n    // 根据请求方式返回数据\n    if (isGet) {\n      return this.filterEmptyData(this.requestParams.data)\n    } else {\n      return { ...this.requestParams.data }\n    }\n  }\n\n  /**\n   * 是否是get类型方法\n   */\n  private isGetMethod() {\n    return [RequestMethod.Get, RequestMethod.Delete].includes(\n      this.requestServer.type\n    )\n  }\n\n  /**\n   * 过滤空数据\n   * @param data\n   */\n  private filterEmptyData(values) {\n    // 初始进行浅拷贝\n    const data = { ...values }\n\n    // 过滤数据项\n    Object.entries(data)\n      .filter(([key, value]: [any, any]) => {\n        // 过滤空字符串\n        if (value === undefined || value === '') {\n          return true\n        }\n\n        // 过滤空数组\n        if (\n          value instanceof Array &&\n          (value.length === 0 || value.every(x => x === ''))\n        ) {\n          return true\n        }\n\n        return false\n      })\n      .forEach(([key, value]) => {\n        delete data[key]\n      })\n\n    return data\n  }\n}\n","import { RequestParams } from './request-params'\nexport abstract class ExtendService {\n  public before!: (params: RequestParams) => any\n\n  public after!: (option, params: RequestParams) => any\n}\n"],"sourceRoot":""}